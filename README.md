# OpenNMS My Plugin Plugin


This plugin was generated by the OIA archetype and is used as example project layout.

The generated plugin contains code examples to demonstrate how to create a:
* Karaf Shell Command (see StatsCommand & TopologyCommand)
* REST Endpoint (see WebhookHandler & WebhookHandlerImpl)
* Event Configuration Extension (see EventConfExtension)
* Alarm Lifecycle Listener (see AlarmForwarder)



Build and install the plugin into your local Maven repository using:

```
mvn clean install
```


From the OpenNMS Karaf shell:
```
feature:repo-add mvn:it.arsinfo/karaf-features/0.1.0-SNAPSHOT/xml
feature:install opennms-plugins-myplugin
```


```
cp assembly/kar/target/opennms-myplugin-plugin.kar /opt/opennms/deploy/
feature:install opennms-plugins-myplugin
```

```
bundle:watch *
```


Once installed, the plugin makes the following Karaf shell commands available:
* opennms-myplugin:stats
* opennms-myplugin:push-topology

You can also access the REST endpoint mounted by the plugin at `http://localhost:8980/opennms/rest/myplugin/ping`

Fixing properties in pom.xml to let compile the code

diff -r myplugin/pom.xml myplugin-fixed/pom.xml
19c19
<         <karaf.version>4.3.6</karaf.version>
---
>         <karaf.version>4.3.10</karaf.version>
26c26
<         <opennms.api.version>1.0.0</opennms.api.version>
---
>         <opennms.api.version>1.6.0</opennms.api.version>
113c113
<                     <version>4.2.1</version>
---
>                     <version>5.1.9</version>
